{"ast":null,"code":"import _slicedToArray from \"/Users/linzhipeng/Documents/code_cloud/@kne/react-view-render/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { _ as _objectWithoutPropertiesLoose, a as _extends } from './index-d82fe889.js';\nimport React, { useState, useEffect } from 'react';\nimport { C as Context } from './index-44caef35.js';\nimport { Spin, Result } from 'antd';\nimport { a as applyVariable } from './util-6416b7c7.js';\nimport classnames from 'classnames';\nimport '@loadable/component';\nimport '@kne/react-error-boundary';\nimport 'lodash/get';\nvar _excluded = [\"resource\", \"spin\", \"children\", \"className\"];\n\nvar Remote = function Remote(_ref) {\n  var resource = _ref.resource,\n      _ref$spin = _ref.spin,\n      spin = _ref$spin === void 0 ? {} : _ref$spin,\n      children = _ref.children,\n      className = _ref.className,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      data = _useState6[0],\n      setData = _useState6[1];\n\n  useEffect(function () {\n    setLoading(true);\n    Promise.resolve(typeof resource === 'function' ? resource() : null).then(function (data) {\n      setData(data);\n    }, function (e) {\n      console.error(e);\n      setError(e.message);\n    }).finally(function () {\n      setLoading(false);\n    });\n  }, [resource]);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Spin, spin);\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(Result, {\n      status: \"error\",\n      title: \"\\u52A0\\u8F7D\\u5F02\\u5E38\",\n      subTitle: error\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, props, {\n    className: classnames(className, 'view-render-remote')\n  }), /*#__PURE__*/React.createElement(Context, {\n    variable: {\n      $item: data\n    }\n  }, children));\n};\n\nvar index = applyVariable(Remote);\nexport { index as default };","map":{"version":3,"sources":["../src/Logic/Remote/index.js"],"names":["Remote","spin","className","props","useState","useEffect","setLoading","Promise","resource","data","setData","e","console","setError","error","classnames","$item","applyVariable"],"mappings":";;;;;;;;;;;;AAMA,IAAMA,MAAM,GAAG,SAATA,MAAS,CAAA,IAAA,EAA4D;AAA3D,MAAA,QAAA,GAA2D,IAA3D,CAAA,QAAA;AAAA,kBAA2D,IAA3D,CAAYC,IAAZ;AAAA,MAAYA,IAAZ,0BAAA,EAAA;AAAA,MAAA,QAAA,GAA2D,IAA3D,CAAA,QAAA;AAAA,MAAiCC,SAAjC,GAA2D,IAA3D,CAAiCA,SAAjC;AAAA,MAA+CC,KAA/C,GAA2D,6BAAA,CAAA,IAAA,EAAA,SAAA,CAA3D;;AACd,kBAA8BC,QAAQ,CAAtC,IAAsC,CAAtC;AAAA;AAAA,MAAM,OAAN;AAAA,MAAM,UAAN;;AACA,mBAA0BA,QAAQ,CAAlC,KAAkC,CAAlC;AAAA;AAAA,MAAM,KAAN;AAAA,MAAM,QAAN;;AACA,mBAAwBA,QAAQ,CAAhC,IAAgC,CAAhC;AAAA;AAAA,MAAM,IAAN;AAAA,MAAM,OAAN;;AACAC,EAAAA,SAAS,CAAC,YAAM;AACdC,IAAAA,UAAU,CAAVA,IAAU,CAAVA;AACAC,IAAAA,OAAO,CAAPA,OAAAA,CAAgB,OAAA,QAAA,KAAA,UAAA,GAAiCC,QAAjC,EAAA,GAAhBD,IAAAA,EAAAA,IAAAA,CAA0EE,UAAAA,IAAD,EAAU;AACjFC,MAAAA,OAAO,CAAPA,IAAO,CAAPA;AADFH,KAAAA,EAEII,UAAAA,CAAD,EAAO;AACRC,MAAAA,OAAO,CAAPA,KAAAA,CAAAA,CAAAA;AACAC,MAAAA,QAAQ,CAACF,CAAC,CAAVE,OAAQ,CAARA;AAJFN,KAAAA,EAAAA,OAAAA,CAKW,YAAM;AACfD,MAAAA,UAAU,CAAVA,KAAU,CAAVA;AANFC,KAAAA;AAFO,GAAA,EAUN,CAVHF,QAUG,CAVM,CAATA;;AAWA,MAAA,OAAA,EAAa;AACX,WAAA,aAAO,KAAA,CAAA,aAAA,CAAA,IAAA,EAAP,IAAO,CAAP;AACD;;AACD,MAAA,KAAA,EAAW;AACT,WAAA,aAAO,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAQ,MAAA,MAAM,EAAd,OAAA;AAAuB,MAAA,KAAK,EAA5B,0BAAA;AAAoC,MAAA,QAAQ,EAAES;AAA9C,KAAA,CAAP;AACD;;AAED,SAAA,aAAO,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAAgB,IAAA,SAAS,EAAEC,UAAU,CAAA,SAAA,EAAA,oBAAA;AAArC,GAAA,CAAA,EAAA,aACL,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AAAS,IAAA,QAAQ,EAAE;AAAEC,MAAAA,KAAK,EAAEP;AAAT;AAAnB,GAAA,EADF,QACE,CADK,CAAP;AAtBF,CAAA;;AA2BA,IAAA,KAAA,GAAeQ,aAAa,CAA5B,MAA4B,CAA5B","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Context from '../Context';\nimport { Spin, Result } from 'antd';\nimport { applyVariable } from '../../util';\nimport classnames from 'classnames';\n\nconst Remote = ({ resource, spin = {}, children, className, ...props }) => {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    setLoading(true);\n    Promise.resolve(typeof resource === 'function' ? resource() : null).then((data) => {\n      setData(data);\n    }, (e) => {\n      console.error(e);\n      setError(e.message);\n    }).finally(() => {\n      setLoading(false);\n    });\n  }, [resource]);\n  if (loading) {\n    return <Spin {...spin}/>;\n  }\n  if (error) {\n    return <Result status=\"error\" title=\"加载异常\" subTitle={error}/>;\n  }\n\n  return <div {...props} className={classnames(className, 'view-render-remote')}>\n    <Context variable={{ $item: data }}>{children}</Context>\n  </div>;\n};\n\nexport default applyVariable(Remote);"]},"metadata":{},"sourceType":"module"}