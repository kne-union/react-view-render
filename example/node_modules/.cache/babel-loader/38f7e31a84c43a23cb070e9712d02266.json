{"ast":null,"code":"import _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar ErrorBoundary = /*#__PURE__*/function (_Component) {\n  _inherits(ErrorBoundary, _Component);\n\n  var _super = _createSuper(ErrorBoundary);\n\n  function ErrorBoundary() {\n    var _this;\n\n    _classCallCheck(this, ErrorBoundary);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      error: null\n    });\n\n    return _this;\n  }\n\n  _createClass(ErrorBoundary, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error) {\n      this.setState(function () {\n        return {\n          error: error\n        };\n      });\n      this.props.onError(error);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          ErrorComponent = _this$props.errorComponent,\n          errorRender = _this$props.errorRender;\n\n      if (this.state.error) {\n        if (ErrorComponent) {\n          return /*#__PURE__*/React.createElement(ErrorComponent, {\n            error: this.state.error\n          });\n        }\n\n        if (errorRender) {\n          return errorRender(this.state.error);\n        }\n\n        console.error(this.state.error);\n        return null;\n      }\n\n      return this.props.children;\n    }\n  }]);\n\n  return ErrorBoundary;\n}(Component);\n\n_defineProperty(ErrorBoundary, \"propTypes\", {\n  onError: PropTypes.func,\n  children: PropTypes.node,\n  errorComponent: PropTypes.elementType,\n  errorRender: PropTypes.func\n});\n\n_defineProperty(ErrorBoundary, \"defaultProps\", {\n  onError: function onError() {}\n});\n\nexport default ErrorBoundary;","map":{"version":3,"sources":["../src/index.js"],"names":["ErrorBoundary","Component","onError","PropTypes","children","errorComponent","errorRender","func","error","ErrorComponent","console"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAGqBA,aAAAA,GAAAA,aAAAA,UAAAA,UAAAA,EAAAA;;;;;;;;;;;;;;;;4DAWX;AACNQ,MAAAA,KAAK,EAAE;AADD,K;;;;;;;sCAIUA,K,EAAO;AACvB,WAAA,QAAA,CAAc,YAAA;AAAA,eAAO;AAACA,UAAAA,KAAK,EAALA;AAAD,SAAP;AAAd,OAAA;AACA,WAAA,KAAA,CAAA,OAAA,CAAA,KAAA;AACD;;;6BAEQ;AAAA,UAAA,WAAA,GAC+C,KAD/C,KAAA;AAAA,UACgBC,cADhB,GAAA,WAAA,CAAA,cAAA;AAAA,UACgCH,WADhC,GAAA,WAAA,CAAA,WAAA;;AAEP,UAAI,KAAA,KAAA,CAAJ,KAAA,EAAsB;AACpB,YAAA,cAAA,EAAoB;AAClB,iBAAA,aAAO,KAAA,CAAA,aAAA,CAAA,cAAA,EAAA;AAAgB,YAAA,KAAK,EAAE,KAAA,KAAA,CAAWE;AAAlC,WAAA,CAAP;AACD;;AACD,YAAA,WAAA,EAAiB;AACf,iBAAOF,WAAW,CAAC,KAAA,KAAA,CAAnB,KAAkB,CAAlB;AACD;;AACDI,QAAAA,OAAO,CAAPA,KAAAA,CAAc,KAAA,KAAA,CAAdA,KAAAA;AACA,eAAA,IAAA;AACD;;AAED,aAAO,KAAA,KAAA,CAAP,QAAA;AACD;;;;CAlCkBV,CAAsBC,SAAtBD,C;;gBAAAA,a,EAAAA,W,EACA;AACjBE,EAAAA,OAAO,EAAEC,SAAS,CADD,IAAA;AAEjBC,EAAAA,QAAQ,EAAED,SAAS,CAFF,IAAA;AAGjBE,EAAAA,cAAc,EAAEF,SAAS,CAHR,WAAA;AAIjBG,EAAAA,WAAW,EAAEH,SAAS,CAACI;AAJN,C;;gBADAP,a,EAAAA,c,EAOG;AACpBE,EAAAA,OADoB,EAAA,SAAA,OAAA,GACV,CAAA;AADU,C","sourcesContent":["import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class ErrorBoundary extends Component {\n  static propTypes = {\n    onError: PropTypes.func,\n    children: PropTypes.node,\n    errorComponent: PropTypes.elementType,\n    errorRender: PropTypes.func\n  }\n  static defaultProps = {\n    onError() {\n    }\n  }\n  state = {\n    error: null,\n  }\n\n  componentDidCatch(error) {\n    this.setState(() => ({error}))\n    this.props.onError(error)\n  }\n\n  render() {\n    const {errorComponent: ErrorComponent, errorRender} = this.props;\n    if (this.state.error) {\n      if (ErrorComponent) {\n        return <ErrorComponent error={this.state.error}/>\n      }\n      if (errorRender) {\n        return errorRender(this.state.error);\n      }\n      console.error(this.state.error);\n      return null;\n    }\n\n    return this.props.children;\n  }\n}"]},"metadata":{},"sourceType":"module"}